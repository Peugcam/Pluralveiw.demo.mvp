# 🔍 PluralView MVP

> Plataforma de Análise Multi-Perspectiva: Agregação inteligente de fontes, filtragem de vieses e mapeamento de narrativas para profissionais que trabalham com informação

[![Next.js](https://img.shields.io/badge/Next.js-14.0-black)](https://nextjs.org/)
[![React](https://img.shields.io/badge/React-18.2-blue)](https://reactjs.org/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind-3.3-38bdf8)](https://tailwindcss.com/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

## 🎯 O Que É

**PluralView** é uma ferramenta profissional de **análise multi-perspectiva** que agrega dezenas de fontes automaticamente, identifica vieses ideológicos e mapeia narrativas complexas em **segundos**.

Analise qualquer tópico através de **6 perspectivas diferentes** com fontes verificadas, trust scores e detecção automática de vieses.

---

## 👥 Para Quem é o PluralView

### 🎯 PRIORIDADE ALTA

#### 📰 1. Jornalismo Investigativo & Fact-Checking

**Posicionamento:** *"Fact-checker do fact-checker. Agregamos dezenas de fontes em minutos, identificando vieses."*

**Perfil:**
- Jornalistas investigativos
- Equipes de fact-checking
- Editores de investigação
- Repórteres de dados

**Dor principal:**
Verificar múltiplas fontes manualmente leva **horas ou dias**. Identificar vieses ideológicos ocultos é difícil e demorado.

**Como PluralView resolve:**
- ✅ Agregação de **15-20 fontes** em 12 segundos
- ✅ **Trust Score 0-100** para cada fonte
- ✅ **Detecção automática de 5 tipos de vieses**
- ✅ Mapeamento de narrativas contraditórias
- ✅ Documentação rastreável de metodologia

**Budget:** R$ 2.000-5.000/mês

**Caso de Uso Real:**

```
SITUAÇÃO: Matéria sobre reforma tributária

SEM PLURALVIEW:
- 4 horas buscando fontes manualmente
- 2 horas cruzando informações
- Risco de fontes não verificadas
- Total: 6 horas

COM PLURALVIEW:
Query: "Reforma tributária 2025 - impactos econômicos"
├─ 12 segundos → 6 perspectivas
├─ 18 fontes agregadas (gov, academia, mídia)
├─ Trust score médio: 82/100
├─ 3 vieses detectados
└─ Narrativas mapeadas: governo vs oposição vs mercado

Jornalista usa resultado para:
1. Verificar consistência de fontes
2. Identificar gaps de cobertura
3. Documentar imparcialidade metodológica
4. Preparar matéria com múltiplas perspectivas

Total: 30 minutos (incluindo leitura e análise)
Economia: 5h30 por matéria
```

---

#### 🎓 2. Pesquisa Acadêmica (Comunicação, Sociologia, Ciências Políticas)

**Posicionamento:** *"Transforma meses de análise de discurso em semanas. Metodologia replicável."*

**Perfil:**
- Professores universitários
- Pesquisadores de mestrado/doutorado
- Centros de pesquisa
- Laboratórios de análise de discurso

**Dor principal:**
Análise de discurso e mapeamento de narrativas leva **meses**. Coleta manual de dados é trabalhosa e sujeita a viés do pesquisador.

**Como PluralView resolve:**
- ✅ **Coleta automatizada** de corpus em segundos
- ✅ **Metodologia replicável** (queries + trust scores documentados)
- ✅ **Dados estruturados** (JSON export)
- ✅ Análise multi-perspectiva sistemática
- ✅ Detecção objetiva de vieses

**Budget:** R$ 500-2.000/mês

**Caso de Uso Real:**

```
SITUAÇÃO: Tese de doutorado sobre polarização política em redes sociais

SEM PLURALVIEW:
- 2 meses coletando fontes manualmente
- 3 meses categorizando discursos
- Viés do pesquisador na seleção
- Dificuldade de replicação
- Total: 5 meses de coleta + análise

COM PLURALVIEW:
Fase 1 - Coleta de Corpus (1 semana):
├─ 50 queries sobre tópicos políticos
├─ 300+ fontes agregadas automaticamente
├─ Trust scores calculados
├─ Vieses já identificados
└─ Dados exportados em JSON

Fase 2 - Análise Profunda (3 semanas):
├─ Pesquisador foca em análise qualitativa
├─ Metodologia documentada (replicável)
├─ Comparação de narrativas estruturada
└─ Paper com rigor metodológico

Total: 1 mês (não 5 meses)
Economia: 4 meses de trabalho
Qualidade: Maior (metodologia objetiva + replicável)
```

---

### 🎯 PRIORIDADE MÉDIA

#### 🏛️ 3. Think Tanks & Consultorias de Políticas Públicas

**Posicionamento:** *"Documenta imparcialidade. Relatórios apartidários com credibilidade metodológica."*

**Perfil:**
- Think tanks apartidários
- Consultorias de políticas públicas
- Institutos de pesquisa
- ONGs de advocacy

**Dor principal:**
Relatórios precisam de **credibilidade apartidária**. Risco de acusações de viés ideológico compromete reputação.

**Como PluralView resolve:**
- ✅ **Documentação de imparcialidade metodológica**
- ✅ Análise estruturada de múltiplas perspectivas
- ✅ Identificação explícita de vieses
- ✅ Fontes com trust scores verificáveis
- ✅ Rastreabilidade total

**Budget:** R$ 3.000-8.000/mês

**Caso de Uso Real:**

```
SITUAÇÃO: Relatório sobre reforma da previdência para cliente governamental

DESAFIO:
- Cliente exige imparcialidade comprovada
- Múltiplos stakeholders com interesses opostos
- Risco de acusações de viés político

COM PLURALVIEW:
1. Análise Multi-Stakeholder:
   ├─ Perspectiva Governo (institucional)
   ├─ Perspectiva Sindicatos (conservadora)
   ├─ Perspectiva Mercado (técnica)
   ├─ Perspectiva Academia (acadêmica)
   └─ Perspectiva Sociedade Civil (popular)

2. Documentação de Metodologia:
   ├─ Todas as fontes citadas (trust scores)
   ├─ Vieses de cada fonte identificados
   ├─ Processo replicável
   └─ Transparência total

3. Resultado:
   ├─ Relatório apartidário defendível
   ├─ Credibilidade metodológica
   ├─ Redução de 60% no tempo de pesquisa
   └─ Cliente satisfeito (renovação garantida)
```

---

#### 🚨 4. Gestão de Crise & Reputação

**Posicionamento:** *"Vai além de métricas. Monitora narrativas complexas em tempo real."*

**Perfil:**
- Departamentos de comunicação corporativa
- Agências de gestão de crise
- Chief Communications Officers
- Equipes de relações públicas

**Dor principal:**
Ferramentas de monitoramento tradicionais (Brandwatch, etc.) só mostram **métricas quantitativas**. Análise qualitativa de narrativas é manual e lenta.

**Como PluralView resolve:**
- ✅ **Análise qualitativa profunda** (não só métricas)
- ✅ Mapeamento de narrativas complexas
- ✅ Identificação de vieses na cobertura
- ✅ Alertas de mudança de narrativa
- ✅ Comparação antes/depois de crises

**Budget:** R$ 5.000-15.000/mês

**Caso de Uso Real:**

```
SITUAÇÃO: Empresa de tecnologia enfrenta crise de vazamento de dados

DESAFIO:
- Narrativa negativa espalhando rapidamente
- Múltiplas frentes de ataque (mídia, redes sociais, governo)
- Ferramentas de monitoramento mostram volume mas não contexto

COM PLURALVIEW:
Dia 1 - Diagnóstico Rápido:
├─ Query: "Vazamento dados Empresa X"
├─ 6 perspectivas em 12 segundos
├─ Identificação de narrativas:
│   ├─ Mídia: foco em falha de segurança
│   ├─ Academia: discussão sobre LGPD
│   ├─ Governo: ameaça de multa
│   └─ Sociedade: preocupação com privacidade
└─ Mapeamento completo em 5 minutos

Dias 2-7 - Monitoramento:
├─ Queries diárias sobre cada narrativa
├─ Detecção de mudanças de tom
├─ Identificação de vieses favoráveis/desfavoráveis
└─ Ajuste de estratégia de comunicação em tempo real

Resultado:
├─ Resposta 3x mais rápida
├─ Comunicação direcionada para cada narrativa
├─ Mitigação de danos à reputação
└─ Economia de $50k em consultoria externa
```

---

## ✨ Funcionalidades Principais

### 🔍 Análise Multi-Perspectiva

Digite qualquer tópico e receba análises de **6 ângulos diferentes**:

1. **Técnica** - Dados científicos e evidências objetivas
2. **Popular** - Senso comum e impacto no dia a dia das pessoas
3. **Institucional** - Posição de governos e organizações oficiais
4. **Acadêmica** - Pesquisas, teorias e estudos universitários
5. **Conservadora** - Tradição, cautela e valores tradicionais
6. **Progressista** - Mudança social, inovação e equidade

**Output:**
```
Input: "Regulação de IA no Brasil"
Output:
├── 6 perspectivas detalhadas (200-300 palavras cada)
├── 15-20 fontes agregadas automaticamente
├── Trust Score (0-100) para cada fonte
├── Detecção de vieses em cada perspectiva
├── 5 perguntas reflexivas
└── Opção de comparar perspectivas
```

---

### 🛡️ Trust Score System (0-100)

Avaliação automática de credibilidade de fontes baseada em:

- ✅ **Domínio** (+25 pontos) - .edu, .gov, .org, mídia estabelecida
- 🔒 **HTTPS** (+5 pontos) - Segurança básica
- 📅 **Recência** (+15 pontos) - Conteúdo atualizado
- 📝 **Qualidade** (+15 pontos) - Tamanho, citações, sem clickbait
- 📌 **Metadata** (+10 pontos) - Autor, fontes identificadas
- 🚩 **Red Flags** (-20 pontos) - Domínios questionáveis

**Resultado:** 0-100 (categorizado em Alto, Médio, Baixo, Muito Baixo)

**Exemplo:**
```
Fonte: "Relatório do IBGE sobre economia"
├─ Domínio: .gov.br (+25)
├─ HTTPS: Sim (+5)
├─ Recência: 2 meses atrás (+15)
├─ Qualidade: Alta (+15)
├─ Metadata: Completa (+10)
└─ Trust Score: 95/100 (ALTO) ✅
```

---

### 🎭 Detecção Automática de Vieses

Sistema identifica **5 tipos de vieses**:

1. **🎭 Vieses ideológicos ou políticos** - Esquerda/direita, partidarismo
2. **💰 Conflitos de interesse** - Financiamento, patrocínio
3. **📊 Limitações metodológicas** - Amostras pequenas, dados selecionados
4. **👥 Perspectivas sub-representadas** - Vozes ausentes
5. **💭 Suposições não questionadas** - Premissas implícitas

**Exemplo:**
```
Perspectiva Institucional:
"Governo anuncia redução de 20% no desmatamento..."

Vieses detectados:
├─ Viés institucional: Foco em aspectos positivos da política governamental
├─ Perspectiva sub-representada: Comunidades indígenas não consultadas
└─ Suposição não questionada: Dados de desmatamento são precisos
```

---

### 📊 Comparação de Perspectivas

Compare até 6 perspectivas lado a lado:

- **Pontos em Comum** - Consenso entre perspectivas
- **Divergências Principais** - Onde discordam
- **Contradições Diretas** - Afirmações opostas
- **Síntese Integrada** - Visão holística

---

## ⚡ Quick Start

### Pré-requisitos

- Node.js 18+
- npm ou yarn
- Conta no Supabase (grátis)
- API Keys: Anthropic Claude, OpenAI, Tavily

### Instalação

```bash
# Clone o repositório
git clone https://github.com/seu-usuario/pluralview-mvp
cd pluralview-mvp

# Instale dependências
npm install

# Configure variáveis de ambiente
cp .env.example .env.local
# Edite .env.local com suas credenciais

# Execute o projeto
npm run dev
```

Acesse: **http://localhost:3000**

---

## 🔑 Variáveis de Ambiente

Crie um arquivo `.env.local` na raiz do projeto:

```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# OpenAI
OPENAI_API_KEY=sk-...

# Anthropic Claude
ANTHROPIC_API_KEY=sk-ant-...

# Tavily (busca web)
TAVILY_API_KEY=tvly-...

# App
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

### Criar Tabelas no Supabase

Execute o script SQL localizado em:
```
supabase/api_costs_schema_FINAL.sql
```

---

## 💰 Custos

### Modelos de IA Atuais

```
Claude 3.5 Haiku:
├── Input:  $0.80 / 1M tokens
├── Output: $4.00 / 1M tokens
└── Uso: Análise de perspectivas (6x por análise)

GPT-4o-mini:
├── Input:  $0.15 / 1M tokens
├── Output: $0.60 / 1M tokens
└── Uso: Filtros, validação, perguntas (8x por análise)

Tavily Search:
└── Gratuito até 1000 buscas/mês
```

### Custo Real por Análise

```
Por análise completa (6 perspectivas):
├── Claude Haiku (6x):    ~$0.0161 (94%)
├── GPT-4o-mini (8x):     ~$0.0004 (2.3%)
├── Tavily (busca web):   ~$0.0006 (3.5%)
└── Total:                ~$0.0171 (R$ 0,09)

Tempo médio: 12 segundos
```

### Projeções de Uso

| Perfil | Análises/Mês | Custo/Mês | Observação |
|--------|--------------|-----------|------------|
| **Jornalista** | 200 | R$ 18 | ~10 matérias/mês |
| **Pesquisador** | 100 | R$ 9 | Pesquisa de mestrado |
| **Think Tank** | 500 | R$ 45 | Múltiplos relatórios |
| **Gestão de Crise** | 1000 | R$ 90 | Monitoramento diário |

**Redução de 74% em custos** vs versão anterior

---

## 🔧 Tech Stack

### Frontend
- **Next.js 14** - Framework React com SSR
- **React 18** - Biblioteca de UI
- **Tailwind CSS** - Estilização
- **Vercel** - Hosting e deployment

### Backend
- **Next.js API Routes** - Serverless functions
- **Supabase** - PostgreSQL database
- **Zod** - Validação de schemas
- **LRU-Cache** - Cache em memória

### AI & Search
- **Claude 3.5 Haiku** (Anthropic) - Análise de perspectivas
- **GPT-4o-mini** (OpenAI) - Filtros, validação, perguntas
- **Tavily API** - Busca web em tempo real

---

## 📁 Estrutura do Projeto

```
pluralview-mvp/
├── src/
│   ├── pages/
│   │   ├── index.js                    # App principal (1,010 linhas)
│   │   ├── api/
│   │   │   ├── analyze.js              # API principal (734 linhas)
│   │   │   ├── compare-perspectives.js # Comparação de perspectivas
│   │   │   ├── cost-stats.js           # Estatísticas de custos
│   │   │   └── feedback-source.js      # Feedback de usuários
│   │   └── admin/
│   │       └── costs.js                # Dashboard de custos
│   ├── lib/
│   │   ├── costLogger.js               # Tracking de custos
│   │   ├── trustScoreCalculator.js     # Cálculo de confiabilidade
│   │   ├── temporalDetector.js         # Detecção temporal de queries
│   │   ├── validation.js               # Schemas de validação
│   │   ├── rateLimit.js                # Rate limiting
│   │   └── auth.js                     # Autenticação (opcional)
│   ├── components/
│   │   └── SEO.js
│   └── styles/
│       └── globals.css
├── public/
│   ├── robots.txt
│   ├── sitemap.xml
│   └── og-image.png
├── supabase/
│   └── api_costs_schema_FINAL.sql      # Schema do banco
├── .env.example
├── next.config.js
├── tailwind.config.js
└── package.json
```

---

## 📊 APIs Utilizadas

### API Principal: `/api/analyze`

**Input:**
```json
{
  "topic": "Desinformação em eleições"
}
```

**Output:**
```json
{
  "success": true,
  "analysisId": "uuid",
  "perspectives": [
    {
      "type": "tecnica",
      "content": "Análise técnica...",
      "biases": ["Viés 1", "Viés 2"],
      "sources": [
        {
          "title": "Título da fonte",
          "url": "https://...",
          "type": "academico",
          "trustScore": 85,
          "trustLevel": "high",
          "trustFactors": {...}
        }
      ]
    }
    // ... mais 5 perspectivas
  ],
  "questions": [
    "Pergunta reflexiva 1?",
    // ... mais 4 perguntas
  ]
}
```

### Outras APIs

- `/api/compare-perspectives` - Compara 2-6 perspectivas
- `/api/cost-stats` - Estatísticas de custos
- `/api/feedback-source` - Feedback sobre fontes

---

## 🛡️ Segurança

### Proteções Implementadas

- ✅ **Rate Limiting:** 5 análises/min por IP
- ✅ **Input Validation:** Zod schemas
- ✅ **Sanitização:** Remoção de caracteres perigosos
- ✅ **Headers de Segurança:** CSP, HSTS, XSS Protection
- ✅ **RLS no Supabase:** Row Level Security ativo
- ✅ **Timeout:** 30s para todas as requisições

---

## 🚀 Deployment

### Vercel (Recomendado)

1. Push para GitHub
2. Conecte ao Vercel
3. Configure variáveis de ambiente
4. Deploy automático!

```bash
# Via CLI
vercel --prod
```

---

## 📈 Monitoramento

### Dashboard de Custos

**URL:** `/admin/costs`

**Períodos disponíveis:**
- Últimas 24 horas
- Últimos 7 dias
- Últimos 30 dias
- Últimos 90 dias

### KPIs Recomendados

- ✅ Custo por análise: **< $0.02**
- ✅ Custo diário: **< $5**
- ✅ Custo mensal: **< $50**
- ✅ Tempo de resposta: **< 15s**
- ✅ Taxa de erro: **< 1%**

---

## 🛠️ Desenvolvimento

### Scripts Disponíveis

```bash
# Desenvolvimento
npm run dev

# Build de produção
npm run build

# Iniciar produção
npm start

# Linting
npm run lint
```

### Adicionar Nova Perspectiva

1. Edite `src/pages/api/analyze.js`
2. Adicione novo tipo em `perspectiveTypes` (linha ~548)
3. Ajuste prompts conforme necessário
4. Teste localmente

### Modificar Trust Score

Edite `src/lib/trustScoreCalculator.js`:
- Adicionar/remover domínios confiáveis
- Ajustar pesos dos fatores
- Modificar níveis de confiança

---

## 📝 Documentação Adicional

- **[Análise Técnica Completa](OTIMIZACAO_CUSTOS_AI_BRASIL.md)** - Avaliação crítica e otimizações
- **[Setup Guide](SETUP_GUIDE.md)** - Guia passo a passo de configuração
- **[Trust Score Implementation](TRUST_SCORE_IMPLEMENTATION.md)** - Sistema de confiabilidade
- **[Bias Detection](BIAS_DETECTION_IMPLEMENTATION.md)** - Detecção de vieses
- **[Temporal Query System](TEMPORAL_QUERY_SYSTEM.md)** - Queries temporais
- **[Security Improvements](SECURITY_IMPROVEMENTS.md)** - Melhorias de segurança

---

## 🤝 Contribuindo

### Antes de Contribuir

1. Leia a documentação técnica completa
2. Teste localmente
3. Siga os padrões de código existentes
4. Adicione testes (quando implementados)

### Pull Requests

1. Fork o projeto
2. Crie uma branch: `git checkout -b feature/nova-feature`
3. Commit: `git commit -m 'Add: nova feature'`
4. Push: `git push origin feature/nova-feature`
5. Abra um Pull Request

---

## 📄 Licença

Este projeto está sob a licença MIT. Veja o arquivo [LICENSE](LICENSE) para mais detalhes.

---

## 👨‍💻 Autor

**PluralView MVP**
- Desenvolvido para profissionais de informação
- Otimizado para jornalismo, academia e análise de políticas públicas

---

## 🙏 Agradecimentos

- **Anthropic** - Claude API
- **OpenAI** - GPT API
- **Tavily** - Search API
- **Supabase** - Database & Auth
- **Vercel** - Hosting

---

## 📞 Suporte

- 📧 Email: [seu-email]
- 🐛 Issues: [GitHub Issues](https://github.com/seu-usuario/pluralview-mvp/issues)
- 📖 Docs: [Ver documentação completa](OTIMIZACAO_CUSTOS_AI_BRASIL.md)

---

## 🔗 Links Úteis

- [Next.js Documentation](https://nextjs.org/docs)
- [Anthropic Claude API](https://docs.anthropic.com/)
- [OpenAI API](https://platform.openai.com/docs)
- [Supabase Docs](https://supabase.com/docs)
- [Tavily Search](https://docs.tavily.com/)

---

<div align="center">

**Transformando horas de research em segundos de insight**

**Agregação inteligente • Detecção de vieses • Mapeamento de narrativas**

[⬆ Voltar ao topo](#-pluralview-mvp)

</div>
